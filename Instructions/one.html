<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CPL Auction ‚Äì Official Rules</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{--accent:#ff6b35;--accent2:#ff3da1;--lime:#22c55e}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;background:linear-gradient(135deg,#fff7ed,#fff0f6);}
    .card{border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,0.08);}
    #confettiCanvas{position:fixed;left:0;top:0;pointer-events:none;z-index:60}
  </style>
</head>
<body>
  <div id="root"></div>

  <canvas id="confettiCanvas"></canvas>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
  const { useState, useEffect, useRef } = React;

  const slides = [
    {
      title: 'Budget & Team Size',
      icon: 'üí∞',
      brief: 'Each team gets a ‚Çπ45 Crore budget to buy exactly 8 players.',
      content: `Each team is allocated a fixed budget of<strong> ‚Çπ45 Crore</strong>. You must acquire exactly<strong> eight players </strong> for your squad by the end of the auction. Teams with fewer than eight players at the conclusion of the event will be disqualified and will not receive a score.`
    },
    {
      title: 'Player Categories',
      icon: 'üè∑Ô∏è',
      brief: 'Players are grouped into four tiers: Elite, Premium, Solid, and Budget.',
      content: `Players are categorized into four tiers based on their scores, which also determines their starting bid price:
- <strong>Elite:</strong> Score 91‚Äì100 => Value ‚Çπ4 Cr ‚âà 400 Lakh
- <strong>Premium:</strong> Score 81‚Äì90 => Value ‚Çπ2 Cr ‚âà 200 Lakh
- <strong>Solid:</strong> Score 66‚Äì80 => Value ‚Çπ70 Lakh
- <strong>Budget:</strong> Score 50‚Äì65 => Value ‚Çπ30 Lakh
`
    },
    {
      title: 'Bidding Rules & Increments',
      icon: 'üì£',
      brief: 'The auctioneer manages the bidding. Bid increments are fixed.',
      content: `The auctioneer will announce a player to open the bidding window. The minimum bid increments are determined by the player's current price:
      <strong>- Under ‚Çπ50 Lakh</strong>  ‚Üí increments of ‚Çπ5 Lakh.
      <strong>- ‚Çπ50 Lakh ‚Äì 1 Cr </strong>‚Üí increments of ‚Çπ10 Lakh.
      <strong>- ‚Çπ1 Cr ‚Äì 2 Cr </strong>‚Üí increments of ‚Çπ20 Lakh.
      <strong>- Above ‚Çπ2 Cr </strong>‚Üí increments of ‚Çπ50 Lakh.`
    },
    {
      title: 'Auction Flow & Tiebreakers',
      icon: 'üîÑ',
      brief: 'The auction has two phases: Main Auction and Re-Auction.',
      content: `The event proceeds in two phases. The <strong>Main Auction</strong> is where the primary list of players is presented. Any players who remain unsold after this phase will move to the <strong>Re-Auction</strong> phase. In the Re-Auction, teams can bid on these unsold players to complete their squads.`
    },
    {
      title: 'Player Archetypes',
      icon: 'üß©',
      brief: 'Each player has an archetype that affects team synergy.',
      content: `Understanding archetypes is key to building a high-synergy team. Here are the archetypes you will encounter in the auction:
      <br><strong>üèè Batsman Category:</strong>
      <ul>
        <li><strong>BA:</strong> Batting All-Rounder</li>
        <li><strong>WK:</strong> Wicket-Keeper</li>
        <li><strong>AO:</strong> Aggressive Opener</li>
        <li><strong>AN:</strong> Anchor</li>
        <li><strong>FI:</strong> Finisher</li>
      </ul>
      <strong>‚öæ Bowler Category:</strong>
      <ul>
        <li><strong>PA:</strong> Pace Bowler</li>
        <li><strong>SP:</strong> Spin Bowler</li>
        <li><strong>CS:</strong> Containment Specialist</li>
        <li><strong>BO:</strong> Bowling All-Rounder</li>
      </ul>`
    },

    {
      title: 'Understanding Synergy System',
      icon: '‚ö°',
      brief: 'Smart archetype combinations boost your team score significantly.',
      content: `Synergy is the secret to building a championship-winning team! When certain player archetypes are paired together, they create powerful bonuses or penalties that can dramatically impact your final score.
      <br><br><strong>Positive Synergy Examples:</strong>
      - AO + AN (Aggressive Opener + Anchor): +20 points
      - BA + FI (Batting All-Rounder + Finisher): +15 points
      - PA + SP (Pace Bowler + Spin Bowler): +25 points
      <br><br><strong>Negative Synergy Examples:</strong>
      - AO + AO (Two Aggressive Openers): -15 points
      - FI + FI (Two Finishers): -10 points
      <br><br><strong>üìã Check out the printed synergy combo sheet</strong> provided at your table for the complete list of all positive and negative combinations!`
    },
    {
      title: 'Final Score Calculation',
      icon: 'üèÜ',
      brief: 'Your team\'s final score combines base scores with synergy bonuses/penalties.',
      content: `Your team's final score is calculated using this formula:
      <br><br><strong>Final Team Score= Sum of 8 Players Base Scores + (Positive Synergy Bonuses -Negative Synergy Penalties)</strong>
      <br><br><strong>Example:</strong> If your 8 players have base scores totaling 640 points, +35 from positive synergy combinations, and -10 from negative combinations, your final score would be: 640 + 35 -10 = <strong>665 points</strong>
      <br><br>In case of tied final scores, the team with the <strong>higher remaining budget</strong> will be declared the winner. This rewards both strategic team building and smart budget management!`
    }
  ];

  function useWindowSize() {
    const [size, setSize] = useState({w: window.innerWidth, h: window.innerHeight});
    useEffect(()=>{
      const onResize = ()=> setSize({w: window.innerWidth, h: window.innerHeight});
      window.addEventListener('resize', onResize);
      return ()=> window.removeEventListener('resize', onResize);
    },[]);
    return size;
  }

  function ConfettiCanvas(){
    const canvasRef = useRef(null);
    const particlesRef = useRef([]);
    const rafRef = useRef(null);

    useEffect(()=>{
      const canvas = document.getElementById('confettiCanvas');
      const ctx = canvas.getContext('2d');
      function resize(){canvas.width = window.innerWidth; canvas.height = window.innerHeight}
      resize(); window.addEventListener('resize', resize);

      function spawnBurst(x){
        const count = 90;
        for(let i=0;i<count;i++){
          particlesRef.current.push({
            x: x || Math.random()*canvas.width,
            y: Math.random()*canvas.height*0.2,
            vx: (Math.random()-0.5)*8,
            vy: Math.random()*6+2,
            size: Math.random()*8+4,
            angle: Math.random()*360,
            color: `hsl(${Math.floor(Math.random()*360)},70%,55%)`,
            life: 120 + Math.random()*60
          });
        }
      }

      function frame(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        const p = particlesRef.current;
        for(let i=p.length-1;i>=0;i--){
          const o = p[i];
          o.x += o.vx; o.y += o.vy; o.vy += 0.15; o.life--;
          ctx.save();
          ctx.translate(o.x,o.y);
          ctx.rotate((o.angle+=0.1));
          ctx.fillStyle = o.color;
          ctx.fillRect(-o.size/2, -o.size/2, o.size, o.size*0.6);
          ctx.restore();
          if(o.life<=0 || o.y>canvas.height+50) p.splice(i,1);
        }
        rafRef.current = requestAnimationFrame(frame);
      }

      rafRef.current = requestAnimationFrame(frame);
      window.__spawnConfetti = spawnBurst;

      return ()=>{
        cancelAnimationFrame(rafRef.current);
        window.removeEventListener('resize', resize);
        particlesRef.current = [];
        window.__spawnConfetti = null;
      }
    },[]);

    return null;
  }

  function Carousel(){
    const [index, setIndex] = useState(0);
    const size = useWindowSize();

    useEffect(()=>{
      const c = document.getElementById('confettiCanvas');
      if(c){c.width = window.innerWidth; c.height = window.innerHeight}
    },[size]);

    function goNext(){
      if(index < slides.length-1) setIndex(i=>i+1);
      else {
        if(window.__spawnConfetti) window.__spawnConfetti(window.innerWidth*0.5);
        const btn = document.getElementById('readyBtn');
        if(btn){btn.classList.add('transform','scale-105'); setTimeout(()=>btn.classList.remove('transform','scale-105'),600)}
      }
    }
    function goPrev(){ if(index>0) setIndex(i=>i-1) }

    const pct = Math.round(((index+1)/slides.length)*100);
    const currentSlide = slides[index];

    return (
      <div className="min-h-screen flex items-center justify-center p-6">
        <div className="w-full max-w-4xl">

          <div className="flex items-center justify-between mb-4">
            <div>
              <div className="text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-orange-400">CPL Auction ‚Äì Official Rules</div>
              <div className="text-sm text-gray-600 mt-1">A simple walkthrough of the auction rules.</div>
            </div>
            <div className="text-sm text-gray-700">Step <strong>{index+1}</strong> of {slides.length}</div>
          </div>

          <div className="card bg-white p-6 relative overflow-hidden">
            <div className="flex items-center gap-4 mb-4">
              <div className="w-16 h-16 rounded-lg bg-gradient-to-br from-pink-300 to-orange-300 flex items-center justify-center text-3xl">{currentSlide.icon}</div>
              <div>
                <div className="text-xl font-bold">{currentSlide.title}</div>
                <div className="text-sm text-gray-600 mt-1">{currentSlide.brief}</div>
              </div>
            </div>

            <div className="prose max-w-none text-gray-700 mb-6" style={{lineHeight:1.6}}>
              <div key={index} dangerouslySetInnerHTML={{ __html: currentSlide.content.replace(/- /g, '<br/>- ') }} />
            </div>

            <div className="w-full bg-gray-100 rounded-full h-3 overflow-hidden mt-4">
              <div className="h-3 bg-gradient-to-r from-pink-500 to-orange-400" style={{width:`${pct}%`}}></div>
            </div>

            <div className="flex items-center justify-between mt-6">
              <div className="text-sm text-gray-600">Progress: <strong>{pct}%</strong></div>
              <div className="flex gap-2">
                <button onClick={goPrev} disabled={index===0} className={`px-4 py-2 rounded-full font-semibold ${index===0? 'bg-gray-200 text-gray-500' : 'bg-white text-gray-800 shadow'}`}>Back</button>
                {index<slides.length-1 ? (
                  <button onClick={goNext} className="px-5 py-2 rounded-full font-bold bg-gradient-to-r from-pink-500 to-orange-400 text-white shadow">Next ‚Üí</button>
                ) : (
                  <button id="readyBtn" onClick={()=>{ if(window.__spawnConfetti) window.__spawnConfetti(window.innerWidth*0.5); setTimeout(()=> window.location.href='https://storm-cpl.netlify.app/', 1200)}} className="px-5 py-2 rounded-full font-bold bg-gradient-to-r from-green-500 to-lime-500 text-white shadow">I Understand ‚Äì Let's Go!</button>
                )}
              </div>
            </div>

          </div>

          <div className="text-center text-xs text-gray-500 mt-4">This is a standalone instructions page for auction participants.</div>
        </div>
      </div>
    );
  }

  function App(){
    return (
      <>
        <Carousel />
        <ConfettiCanvas />
      </>
    );
  }

  ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>